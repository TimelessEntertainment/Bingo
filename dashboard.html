<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Music Bingo</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #4facfe, #00f2fe);
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header {
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        #welcome-text {
            font-size: 2em;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }

        #dynamic-info {
            text-align: right;
            font-size: 0.9em;
        }

        .logout-link {
            text-decoration: underline;
            color: #ff4c4c;
            cursor: pointer;
            font-size: 0.9em;
        }

        .games-container {
            display: grid;
            grid-template-columns: repeat(3, 200px);
            gap: 20px;
            margin-top: 50px;
        }

        .game-btn {
            padding: 20px;
            font-size: 1.2em;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            color: white;
        }

        .game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }

        .music-bingo { background-color: #ff7f50; }
        .bdsm-trivia { background-color: #6a5acd; }
        .bingo { background-color: #20b2aa; }

        .extra-space {
            margin-top: 50px; /* for future images/cards */
        }
    </style>
</head>
<body>
    <header>
        <div id="welcome-text">Welcome!</div>
        <div>
            <span id="dynamic-info">Loading date/time...</span> |
            <span class="logout-link" id="logout-link">Logout</span>
        </div>
    </header>

    <div class="games-container">
        <button class="game-btn music-bingo" onclick="location.href='music_bingo.html'">Music Bingo</button>
        <button class="game-btn bdsm-trivia" onclick="location.href='bdsm_trivia.html'">BDSM Trivia</button>
        <button class="game-btn bingo" onclick="alert('Coming Soon!')">Bingo</button>
    </div>

    <div class="extra-space">
        <!-- Future images/cards can go here -->
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyCizkQLkKhxlQSRZ7J378jLDVlqPdadu78",
            authDomain: "music-bingo-login.firebaseapp.com",
            projectId: "music-bingo-login",
            storageBucket: "music-bingo-login.firebasestorage.app",
            messagingSenderId: "814220049067",
            appId: "1:814220049067:web:b7a771786e67e9bfa055ee"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const welcomeText = document.getElementById("welcome-text");
        const logoutLink = document.getElementById("logout-link");
        const dynamicInfo = document.getElementById("dynamic-info");

        // Firebase auth check
        onAuthStateChanged(auth, (user) => {
            if (user) {
                welcomeText.textContent = `Welcome, ${user.email}!`;
            } else {
                window.location.href = "login.html";
            }
        });

        // Logout
        logoutLink.addEventListener("click", () => {
            signOut(auth).then(() => {
                window.location.href = "login.html";
            });
        });

        // Date & time update
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString(undefined, options);
            const timeStr = now.toLocaleTimeString();
            dynamicInfo.textContent = `${dateStr} | ${timeStr} | Weather: Loading...`;
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        // Optional: Weather API (OpenWeatherMap)
        async function updateWeather() {
            const apiKey = "YOUR_OPENWEATHERMAP_API_KEY"; // replace with your API key
            const city = "St. Louis"; // change as needed
            try {
                const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=imperial&appid=${apiKey}`);
                const data = await res.json();
                const weatherDesc = data.weather[0].description;
                const temp = Math.round(data.main.temp);
                dynamicInfo.textContent = `${dynamicInfo.textContent.split('|')[0]} | ${dynamicInfo.textContent.split('|')[1]} | ${weatherDesc}, ${temp}Â°F`;
            } catch (err) {
                console.error("Weather API error:", err);
            }
        }

        // Call weather update once (or periodically)
        // updateWeather(); // uncomment when you add your OpenWeatherMap API key
    </script>
</body>
</html>
